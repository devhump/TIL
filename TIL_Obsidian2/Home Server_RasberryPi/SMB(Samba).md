---
aliases:
  - ì‚¼ë°”
tags:
  - HomeServer
---
```dataview
list from #HomeServer
```

#### 1. ì‚¼ë°” ì„¤ì¹˜
```shell
sudo apt-get -y install samba # ìš°ë¶„íˆ¬ ì‚¼ë°” ì„¤ì¹˜
sudo apt-get -y install samba
```

#### 2. ì‚¼ë°” ê³„ì • ë“±ë¡í•˜ê¸°
```shell
sudo smbpasswd -a [ì‚¬ìš©ìëª…]
# sudo smbpasswd -a ramy

sudo pdbedit -L # ì‚¼ë°” ì„œë²„ì— ë“±ë¡ëœ ìœ ì €ë¥¼ í™•ì¸ 
sudo pdbedit -L -v
```

| ì˜µì…˜ | ì„¤ëª…                                                                                                          |
| :----: | ------------------------------------------------------------------------------------------------------------- |
| -a   | ì‚¼ë°” ì‚¬ìš©ìë¥¼ ì¶”ê°€í•  ë•Œ ì‚¬ìš©.<br>ì‚¼ë°” ì‚¬ìš©ìëŠ” ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì— ì¡´ì¬í•˜ëŠ” ê³„ì •ì´ì–´ì•¼ í•œë‹¤.                      |
| -x   | ì‚¼ë°” ì‚¬ìš©ìë¥¼ ì œê±°í•  ë•Œ ì‚¬ìš©                                                                                  |
| -d   | ì‚¼ë°” ì‚¬ìš©ìë¥¼ ì¼ì‹œì ìœ¼ë¡œ ë¹„í™œì„±í™”í•  ë•Œ ì‚¬ìš©                                                                   |
| -e   | ì‚¼ë°” ì‚¬ìš©ìë¥¼ í™œì„±í™”í•  ë•Œ ì‚¬ìš©                                                                                |
| -n   | íŒ¨ìŠ¤ì›Œë“œ ì—†ì´ ë¡œê·¸ì¸ì´ ê°€ëŠ¥í•˜ë„ë¡ í•  ë•Œ ì‚¬ìš©. <br>smb.confì— 'null passwords = yes'ë¼ê³  ì¶”ê°€ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤. |

```shell
smbpasswd -a inpa # â†’ jhnyangë¥¼ ì‚¼ë°” ì‚¬ìš©ìì— ì¶”ê°€í•˜ë©´ì„œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë¶€ì—¬. jeffëŠ” ë¦¬ëˆ…ìŠ¤ì— ìƒì„±ëœ ê³„ì •ì´ì–´ì•¼ í•¨.

smbpasswd inpa # â†’ ì‚¼ë°” íŒ¨ìŠ¤ì›Œë“œë¥¼ ë³€ê²½

smbpasswd -x inpa # â†’ ì‚¼ë°” ì‚¬ìš©ìë¥¼ ì œê±°

smbpasswd -d inpa # â†’ ì‚¼ë°” ì‚¬ìš©ìë¥¼ ë¹„í™œì„±í™”
```

#### 3. ê³µìœ  ë””ë ‰í„°ë¦¬ ìƒì„±
- ìœˆë„ìš°ì—ì„œ ë¦¬ëˆ…ìŠ¤ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”, ì¦‰Â ì‚¼ë°”ë¡œ ê³µìœ ë  ë””ë ‰í„°ë¦¬ë¥¼ í•˜ë‚˜ ìƒì„±í•´ ì¤€ë‹¤.
```shell
mkdir /smbdir

chmod 777 /smbdir # ê¶Œí•œ ì—´ê¸°
```

#### 4. ì‚¼ë°” í™˜ê²½ ì„¤ì •
```shell
vi /etc/samba/smb.conf

```

```shell
[share] # [] ëŒ€ê´„í˜¸ëŠ” ì„¹ì…˜ì„ ì •ì˜, ìœˆë„ìš°ì—ì„œ ì ‘ê·¼í•  ë•Œ í´ë” ì´ë¦„ì´ ì„¸ì…˜ì•ˆì˜ ë¬¸ìì—´ë¡œ ë³´ì¸ë‹¤. ë³´ì´ê³  ì‹¶ì€ ì´ë¦„ì„ ì ìœ¼ë©´ ëœë‹¤.
comment = samba shared directory # ê°„ë‹¨í•œ ê³µìœ  í´ë” ì„¤ëª…
path = /smbdir # ê³µìœ  ë””ë ‰í† ë¦¬ ê²½ë¡œ
read only = no # ì½ê¸° ì „ìš©
writable = yes # ì“°ê¸° ì „ìš© 
guest ok = no # ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ë„ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
valid user = user1 # ê³µìœ  ë””ë ‰í† ë¦¬ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ìë¥¼ ì„¤ì •
create mask = 0777 # íŒŒì¼ í—ˆê°€ê¶Œ
directory mask = 0777 # ë””ë ‰í† ë¦¬ í—ˆê°€ê¶Œ
```

```shell
[share]
comment = samba shared directory
path = /smbdir
read only = no
writable = yes
guest ok = no
valid user = user1
create mask = 0777
directory mask = 0777
```

| ì˜µì…˜                       | value               | ì„¤ëª…                |
|--------------------------|---------------------|-------------------|
| comment                  | (text)              | ê³µìœ  í´ë”ì— ëŒ€í•œ ì„¤ëª…      |
| path                     | (text)              | ê³µìœ  í´ë” ê²½ë¡œ          |
| read only                | yes/no              | ê³µìœ  í´ë”ë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì„¤ì • |
| writable, write ok       | yes/no              | ê³µìœ  í´ë”ë¥¼ ì“°ê¸° ê°€ëŠ¥ìœ¼ë¡œ ì„¤ì • |
| valid users              | (id, id, ...)       | ê³µìœ  í´ë” ì ‘ê·¼ ê°€ëŠ¥ ìœ ì € ëª©ë¡ |
| write list               | (id, id, ...)       | ê³µìœ  í´ë” ì“°ê¸° ê°€ëŠ¥ ìœ ì € ëª©ë¡ |
| public, guest ok         | yes/no              | ê²ŒìŠ¤íŠ¸ ì´ìš© ê°€ëŠ¥ ì—¬ë¶€      |
| browsable                | yes/no              | íŒŒì¼ ëª©ë¡ì„ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ ì—¬ë¶€ |
| printable                | yes/no              | í”„ë¦°í„° ìŠ¤í’€ íŒŒì¼ ì§€ì •      |
| create mask, create mode | (0644 / 0777 / ...) | ìƒì„± ê¶Œí•œ             |
| force group              | (group, group, ...) | ì ‘ê·¼ ê°€ëŠ¥ ê·¸ë£¹ ì§€ì •       |
| directory mask           | (0644 / 0777 / ...) | ê³µìœ  í´ë” ê¶Œí•œ          |


```ad-note
[global]

workgroup = [ì‘ì—… ê·¸ë£¹ëª…]
server string = [Windows Networkì—ì„œ ë³´ì—¬ì¤„ Samba ì„œë²„ì— ëŒ€í•œ ì„¤ëª….]
wins support = [Sambaì„œë²„ì—ì„œ nmbd ë°ëª¬ì´ wins ì„œë²„ì˜ ì—­í• ì„ í•  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ì§€ì • ( yes | no )]
wins server = [wins ì„œë²„ì˜ IPë¥¼ ì§€ì •í•˜ëŠ” ì˜µì…˜]
dns proxy = [nmbd ë°ëª¬ì´ wins ì„œë²„ ì—­í• ì„ í•˜ê³  ë“±ë¡ë˜ì§€ ì•Šì€ Net BIOS ì´ë¦„ì„ ì°¾ì•„ì¤„ ë•Œ DNS ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì—¬ NetBIOS ì´ë¦„ì„ ì°¾ì•„ì¤„ ê²ƒì¸ì§€ì˜ ì—¬ë¶€ ( yes | no )].
interfaces = [ë°”ì¸ë”©í•  íŠ¹ì • ì¸í„°í˜ì´ìŠ¤/ë„¤íŠ¸ì›Œí¬, ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ ë˜ëŠ” IPì£¼ì†Œ/ë„·ë§ˆìŠ¤í¬]
Samba ì„œë²„ ì„œë¹„ìŠ¤ë¥¼ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë³„ ì œê³µí•  ë•Œ ì‚¬ìš©. ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ëª¨ë“  ì¸í„°í˜ì´ìŠ¤. ( ex:  lo eth0 192.168.12.1/24 )
bind interfaces only = ['interfaces' ì˜µì…˜ì„ ì‚¬ìš© ìœ ë¬´ ( yes | no )]
interfaces ì˜µì…˜ì˜ ë„¤íŠ¸ì›Œí¬ì— ëŒ€í•´ì„œ ë°”ì¸ë”©. Sambaê°€ ë°©í™”ë²½ìœ¼ë¡œ ë³´í˜¸ë˜ì§€ ì•Šê±°ë‚˜ ë°©í™”ë²½ ìì²´ì¸ ê²½ìš° ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìœ¼ë‚˜ ë™ì , ë¹„ ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì¸í„°í˜ì´ìŠ¤ì˜ ê²½ìš° ì •í™•í•˜ê²Œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.
log file = [Samba ê° ì‹œìŠ¤í…œì— ëŒ€í•´ ë³„ë„ì˜ ë¡œê·¸ íŒŒì¼ì„ ì‚¬ìš©]
max log size = [ê°œë³„ ë¡œê·¸ íŒŒì¼ì˜ í¬ê¸° ì œí•œ(KB)]
syslog only = [syslogë¥¼ í†µí•´ì„œ ë¡œê·¸ë¥¼ ê¸°ë¡ ìœ ë¬´ (yes | no)]
syslog = [syslogì— ê¸°ë¡í•˜ëŠ” ë¡œê·¸ ë ˆë²¨]
syslogë¡œ ì‚¼ë°” ë¡œê·¸ë¥¼ ì €ì¥í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´ ë‹¤ìŒ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ë†’ì€ ê°’ìœ¼ë¡œ ì„¤ì •.
server role = [ì„œë²„ ëª¨ë“œ]
"standalone server", "member server", "classic primary domain controller", "classic backup domain controller", "active directory domain controller". ëŒ€ë¶€ë¶„ "standalone sever"ë‚˜ "member server"ë¡œ ì‚¬ìš©.  
"Active Directory ë„ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬"ë¡œ ì‹¤í–‰í•˜ë ¤ë©´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§€ìš°ê³  ìƒˆ ë„ë©”ì¸ì„ ë§Œë“¤ë ¤ë©´ ë¨¼ì € "samba-tool ë„ë©”ì¸ í”„ë¡œë¹„ì €ë‹"ì„ ì‹¤í–‰í•´ì•¼ í•œë‹¤.
 
```


#### 5. ì‚¼ë°” ë°ëª¬ smbd ì¬ì‹œì‘ ë° ì—°ê²° ìƒíƒœ í™•ì¸ 
```shell
service smbd restart
```

```shell
smbstatus # ì‚¼ë°” ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ì—°ê²°ìƒíƒœ ë³´ê¸°
```



#### ì¶œì²˜
- [ğŸ§ ì‚¼ë°”(SAMBA) ì„¤ì¹˜ & ì„¤ì • ë°©ë²• [ë¦¬ëˆ…ìŠ¤ â†” ìœˆë„ìš°]](https://inpa.tistory.com/entry/LINUX-%F0%9F%93%9A-%EC%82%BC%EB%B0%94SAMBA-%EC%84%A4%EC%B9%98-%EC%84%A4%EC%A0%95-%E2%80%BB-%EC%B4%9D%EC%A0%95%EB%A6%AC)