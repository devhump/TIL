---
tags: [python, "-"]
---

- 👇유사한 문서들
	- [얕은 복사와 깊은 복사(fin)](얕은%20복사와%20깊은%20복사(fin).md)
	- [copy — 얕은 복사와 깊은 복사 연산](copy%20—%20얕은%20복사와%20깊은%20복사%20연산.md)
	- [얕은 복사(shallow copy)와 깊은 복사(deep copy)](얕은%20복사(shallow%20copy)와%20깊은%20복사(deep%20copy).md)


## 깊은 복사와 얕은 복사 

### 1. 대입문을 통한 복사

- 파이썬에서 대입문은 객체를 복사하지 않고, **대상과 객체 사이에 바인딩을 만든다.**

```python
>>> a = [1,2,3]
>>> b = a
>>>
>>> id(a)
4334435392
>>> id(b)
4334435392
>>> b[0] = "aaa"
>>> b
['aaa', 2, 3]
>>> a
['aaa', 2, 3]
```

→ <u>따라서, a와 b 변수는 같은 리스트 객체를 참조하고 있기 때문에, 둘 중 하나만 변경이 되더라도 모든 변수의 데이터에 영향을 주게 된다.</u>

### 2. 얕은 복사 (copy 함수)

- 새로운 객체를 생성한 후 원본에 접근할 수 있는 참조를 입력한다.

```python
from copy import copy

a = [1,2,3]
b = a[:]

c = list(a)
d = copy(a)

print(a, id(a))
print(b, id(b))
print(c, id(c))
print(d, id(d))
#[1, 2, 3] 4298207104
#[1, 2, 3] 4297573120
#[1, 2, 3] 4297572480
#[1, 2, 3] 4297574080
## id가 전부다름

a[0] = 'aaa'

print(a, id(a))
print(b, id(b))
print(c, id(c))
print(d, id(d))
#['aaa', 2, 3] 4298207104
#[1, 2, 3] 4297573120
#[1, 2, 3] 4297572480
#[1, 2, 3] 4297574080
## a의 인자를 변경했을 때, 
## 다른 변수의 인자는 변동이 없음
```

- **리스트 슬라이스, list함수, copy함수**를 통해 복사하면 객체의 id값이 다르기 때문에 다른 데이터에는 영향을 주지 않게 된다. 이러한 복사 방식을 **얕은 복사**라고 부른다.
- 얼핏보면 문제없어 보이지만, <u>리스트 내부에 리스트가 값으로 있을 경우 문제가 발생한다.</u>

```python
from copy import copy

a = [1, [1, 2, 3]]
b = copy(a) #얕은 복사 실행

print(a, id(a))
print(b, id(b))
#[1, [1, 2, 3]] 4475260928
#[1, [1, 2, 3]] 4475261120
## 두 변수의 id값이 다름을 확인

a[1].append('aa')

print(a, id(a))
print(b, id(b))
#[1, [1, 2, 3, 'aa']] 4475260928
#[1, [1, 2, 3, 'aa']] 4475261120
## 그러나, 리스트를 인자로 갖고 있을 경우 
## 내부리스트의 인자가 같이 변동되는 걸 확인 할 수 있음
```



### 3. 깊은 복사(deepcopy)

- 새로운 객체를 생성한 후 원본의 복사본으로 데이터를 채워 넣는다.

```python
from copy import deepcopy

a = [1, [2, 3, 4]]
b = deepcopy(a) # 깊은 복사 실행

print(a, id(a))
print(b, id(b))
#[1, [2, 3, 4]] 4339061184
#[1, [2, 3, 4]] 4339254336
## id값 다름 확인

a[1].append('aa')

print(a, id(a))
print(b, id(b))
#[1, [2, 3, 4, 'aa']] 4339061184
#[1, [2, 3, 4]] 4339254336
## a의 값만 변동되는 걸 확인 
```

➡️ 깊은 복사를 통해 복사를 하면 원본 데이터의 값이 변경되어도 복사본은 영향을 받지 않는다. 

### 4. 얕은 복사와 깊은 복사의 차이

```python
from copy import copy, deepcopy 

a = [1, [1, 2, 3]]
b = copy(a)
c = deepcopy(a)

id(a), id(b),id(c)
>>> (4371430912, 4371410240, 4371413504)

id(a[1]), id(b[1]), id(c[1])
>>> (4371421120, 4371421120, 4371411072)
```

- 얕은 복사와 깊은 복사 모두 객체를 복사한다. **다만 얕은 복사의 경우 저장된 데이터들까지 복사를 하진 않기 때문에, 서로가 영향을 주고 받으며,** <u>완전히 독립적인 객체로 만들기 위해서는 깊은 복사가 필요하다.</u>

### 5. 마지막 정리

- 대입문을 통한 복사는 **단순 복제 (동일한 객체를 참조)**
- 얕은 복사는 **껍데기만 복사, 내용은 동일한 객체를 참조**
- 깊은 복사는 **껍데기를 복사하고, 내용도 재귀적으로 복사**

---
출처: https://jinmay.github.io/2019/11/21/python/python-copy-deepcopy/