---
tags:
  - CodingApple/NodejsMongoDB
---
### 남자라면 서버개발을 할 줄 알아야함
![](assets/Node.js%20&%20MongoDB%201.png)
- ▲ 웹서비스를 하나 만들고 싶으면 일단 웹페이지가 필요합니다.<br>이건 html css javascript 쓰면 쉽게 만들 수 있는데<br>근데 이거 프론트엔드 껍데기만으로는 아무것도 할 수 없습니다.
- 👉 실제 동작하는 나만의 서비스를 만들고 싶으면 *서버기능*이 필요합니다.


- 서버 기능이 있어야
	- DB저장기능 
	- 이미지업로드기능
	- 회원기능
	- 채팅기능
	- 검색기능
- 이런 것들을 구현할 수 있으니까요.

- 근데 생각보다 서버개발을 어렵고 복잡한걸로 알고계신 분들이 많은데<br>👉 그건 가르치는 사람이 이상하게 어렵게 가르쳐서 그렇지 실은 별로 어렵지는 않습니다.

### 서버개발자가 짜는 코드
- 서버개발 어떻게 하는 거냐면<br>모든 웹서비스는 요청하면 응답해주는 식으로 이루어져있습니다.

![](assets/Node.js%20&%20MongoDB%201-1.png)

- 예를 들어서 웹툰을 보고싶으면 어떻게해요? 
- 가만히 있는데 네이버가 갑자기 웹툰을 보내주진 않습니다. 
- 여러분이 네이버 웹툰 들어가서 이거저거 눌러서 네이버웹툰 서버에 웹툰 좀 달라고 요청하죠?
- 그럼 서버가 웹툰을 보내줍니다.

![](assets/Node.js%20&%20MongoDB%201-2.png)

- 유튜브 영상을 보고싶으면 어떻게해요?
- 유튜브 들어가서 이거저거 눌러서 영상 달라고 유튜브 서버에다가 요청합니다. 
- 그럼 유튜브 서버는 영상을 보내줍니다.
- 그게 기본적인 웹서비스의 동작방식입니다.
- _유저가 뭔가 데이터를 달라고 하면 서버는 데이터를 보내는 식으로 동작합니다.__ 

- 👉 그리고 그런 식으로 **누가 데이터요청하면 데이터 보내주는 간단한 프로그램**을 우리가 서버라고 부릅니다. 

```ad-tip
그래서 여러분 네이버 웹툰 서버를 만들고 싶으면 
"누가 A 웹툰 달라고 하면 A 웹툰 보내주기"
이렇게 코드짜면 끝입니다. 

그래서 여러분 유튜브 서버를 만들고 싶으면 
"누가 B 영상 달라고 하면 B 영상 보내주기"
이렇게 코드짜면 끝입니다. 

그래서 서버개발자가 짜는 코드는 
"누가 A 요청하면 A 응답해주셈"
기본적으로 이게 99% 입니다. 
```

- 근데 이거 코드를 짤 때 비슷한 코드들이 많아서 이상한 객체지향 문법도 쓰고<br>아니면 가끔 코드를 새로 만들기 귀찮아서 코드중복을 줄일 수 있는 문법도 쓰고

- 코드가 길어지면 파일도 분리하고<br>예외적인 사항을 처리하는 if문도 길게 짜고 그럴 뿐입니다.

- 문법적 기교 빼면 **핵심은 "누가 A 요청하면 A 응답해주기"** 이거밖에 없습니다.<br>그래서 서버개발 별거 아니니까 같이 만들어봅시다. %%빡대가리라도 크게 상관없음%%

### 만들 프로젝트 
- 강의에선 nodejs express mongodb를 이용해서 서버개발을 좀 해보도록 합시다. 
- 간단한 게시판을 만들어보면서 서버개발을 배워볼건데<br>게시판말고도 더 간지나고 멋있는 프로젝트많은데 왜 게시판 만드냐면
	1. 이 강의 목적은 여러분들 이해시켜서 혼자 코드짤 수 있는 사람만드는거라 최대한 쉽고 간단한 프로젝트를 해야하고 
	2. 어짜피 다른 웹서비스를 만들고 싶어도 웹서비스의 99%는 게시판이랑 기능이 똑같습니다.

![](assets/Node.js%20&%20MongoDB%201-3.png)

![](assets/Node.js%20&%20MongoDB%201-4.png)

#### 필요한 사전지식 
- html css 기초
- 자바스크립트 기초 (var if function for array object)
	- 👉이런 것들이 필요합니다.

- *"내가 var if function for array object 문법을 책보고 한번 슥 따라쳐봤다"* 가 아니라<br>*"내가 코드짜다가 필요할 때 var if function for array object 문법을 꺼내서 직접 사용할 줄 안다"* 가 권장사항인데 <br>솔직히 그 정도까진 기대안하니까 강의하면서 다시 설명하긴 합니다.
- 프로그래밍이 아예 처음이면 html 기초, 자바스크립트 기초강의부터 추천드립니다.


### Nodejs의 장점이 뭐냐면
- 웹서버를 만들고 싶으면 여러 언어와 프레임워크가 있는데<br>이 중에 자바스크립트 기반의 Node.js를 사용하는 사람들이 많습니다. 
- 일단 쉽고 성능도 어느정도 나와서 많이 쓰는 것도 있고 (Bun이나 Fastify 사용시 Rust, Go로 만든 서버와 성능이 삐까뜨는 벤치마크도 많습니다)<br>*non-blocking I/O, 비동기처리가 가능하다는 장점*이 있어서 쓴다고 하는데 그게 대체 무슨 뜻인지 알아봅시다.


#### Node.js가 뭐냐면
- 자바스크립트라는 언어가 있습니다.<br>실은 서버만들고 그런 용도는 아니고 <br>html 웹페이지에 여러가지 기능을 넣기 위해 만들어진 언어입니다.<br>그래서 비유하자면 html 따까리 언어가 자바스크립트임

- 근데 자바스크립트를 짜놨으면 이걸 누가 실행해줘야하지않겠습니까<br>실은 여러분들이 짠 자바스크립트는 누가 실행하냐면 웹브라우저가 책임지고 실행해줍니다.

- 크롬브라우저안에도 자바스크립트 실행엔진이 있습니다. <br>구글이 V8이라고 이름을 지어놨는데<br>이걸 하도 성능좋게 잘 만들어서<br>이걸 자랑삼아서 똑 떼어서 *독립적인 실행파일로 출시했는데 이걸 Node.js*라고 부릅니다. 

- 그래서 Node.js는 자바스크립트 파일 실행기일 뿐입니다. <br>👉 이거 설치하면 컴퓨터 아무데서나 자바스크립트로 작성한 파일을 실행할 수 있습니다. (멋있는 말로 Node.js를 자바스크립트 런타임이라고 부름)

- 그래서 Node.js만 쓰면 코드에디터, 윈도우 프로그램 이런 온갖 프로그램을 만들 수 있다보니까<br>사람들이 Nodejs로 웹서버도 만들기 시작한 겁니다. 

- 그런데 특유의 간결한 문법과 성능 덕분에 인기가 아직 많습니다.<br>그리고 웹개발할 때 프론트엔드에서 자바스크립트를 꼭 사용하기 때문에<br>프론트엔드 할 줄 알면 Node.js로 백엔드 서버개발도 매우 쉽게 배울 수 있다는 것도 장점입니다. <br>👉 언어 하나로 프론트엔드랑 백엔드 전부 작성가능

#### Non-blocking I/O
- 왜 성능이 좋은지 잠깐 짚고 넘어가봅시다. <br>Node.js는 non-blocking 이라는 장점 덕분에 보다 빠릿빠릿한 웹서버를 만들 수 있는데<br>예를 들어 지금부터 영화예매 서비스를 하나 만든다고 합시다.

- 어떻게 코드짜냐면 
	1. 누가 영화예매 요청을 하면
	2. 영화를 예매해서 결과를 유저에게 보내주는 프로그램을 하나 만들기<br>끝입니다. 

- 근데 Node.js 말고 파이썬 자바스프링 같은거 대충 써서 일반방식으로 서버를 만들어놓으면 어떤 일이 일어나냐면 <br>기본적으로 **먼저 온 순서대로 차례차례 예매 요청을 처리해줍니다.**

- 거의 모든 프로그래밍 언어는 차례로 한 줄 한 줄 실행되기 때문에<br>영화예매 서비스를 만들어도 기본적으로 그렇게 동작합니다.

##### 일반적인 서버의 경우
![](assets/Node.js%20&%20MongoDB%201-5.png)

- 근데 이렇게 하면 문제가 있습니다. <br>예를 들어 영화표 발급해주는데 1초 걸리는데<br>200장을 예매하는 미친놈이 있으면 어떻게 되죠? <br>이놈 처리하는데 200초가 소요되겠군요.

- 근데 이러면 뒤에 있던 고객도 200초를 대기해야하는 불상사가 일어납니다.  <br>👉 그래서 서버 대충만들면 중간중간 어려운 요청이 들어오면 서버 기능이 전체적으로 느려질 수 있습니다. 

##### Node.js의 경우 (Non-blocking I/O)
![](assets/Node.js%20&%20MongoDB%201-6.png)

- 근데 Node.js를 사용해서 서버를 만들어놓은 경우 어떤 식으로 처리를 해주냐면 
	1. 우선 유저들이 들어오면 요청부터 전부 받습니다 
	2. 그 다음에 빨리빨리 처리가 완료되는 순서대로 유저에게 결과를 보내줍니다.
- 👉 그래서 늦게온 유저도 1장만 예매한다면 빨리빨리 결과를 받아볼 수 있는 겁니다. 200개 예매하던 미친놈은 똑같이 200초 후에 받아보면 되는거고요. 

- 이런식으로 요청들을 처리해주는걸 멋진말로 non-blocking, 비동기 처리라고 합니다. <br>중간에 시간이 오래걸리는 작업을 만나면 그걸 잠깐 제껴두고 다른거부터 우선 처리한다는 소리입니다.

- 물론 정확히 말하면 Node.js 안에서 비동기처리를 지원하는 코드를 작성해야 이런 식으로 효율적인 처리를 매우 쉽게 구현할 수 있는건데<br>대부분의 코드가 비동기처리를 지원하는 코드기 때문에 그냥 기본으로 저렇게 동작하는구나라고 생각해도 됩니다. 

- 👉참고로 파일입출력, DB입출력 이런거 전부 비동기처리가 매우 쉽습니다.


#### 서버 확장하면 되는거 아님?
- 물론 고객이 많으면
	1. 창구 갯수 (thread)를 늘리거나
	2. 창구 처리속도를 늘리거나 (CPU를 업그레이드) 하는 식으로도 대응가능합니다.
- 👉 근데 thread를 늘리면 그만큼 단점도 존재합니다. 

- 많은 창구에서 데이터를 동시에 가져다쓰고 수정하고 삭제하고 그러면<br>데이터의 정확도가 떨어지고, <br>정확도 떨어지는걸 막기 위해 락을 걸면 또 그만큼 처리속도가 늦어지고 <br>그런 문제가 발생하기 때문에 비동기식 처리를 하려고 온갖 노력을 하는 웹서버들이 많은데<br>Node.js 쓰면 기본이 비동기처리임

#### Node.js 단점
- CPU를 많이 갈궈야하는
	- 이미지변환
	- 동영상압축
	- 숫자계산
- 이런 작업이 많이 들어가야하면 관련 라이브러리같은것도 적고 싱글스레드라 성능도 좋지 않을 수 있어서 <br>그런 기능이 필요하면 Node.js는 별로일 수 있습니다. 

- 👉그래서 _비교적 가벼운 요청을 많이 처리해야하는 SNS, 게시판 같은거 만들 때 좋다는 인식_ 이 있습니다. 

- 자바스크립트에 원래 타입시스템이 없어서<br>타입관련 버그들 많다고 싫어하는 사람들도 있었는데<br>*지금은 타입스크립트 쓸 수 있어*서 별걱정 안해도 됩니다. 



